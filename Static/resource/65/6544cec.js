var egret=window.egret=window.egret||{},RES=window.RES=window.RES||{},dragonBones=window.dragonBones=window.dragonBones||{},fgui=window.fgui=window.fgui||{};window.fairygui=fgui;var god=window.god=window.god||{},register=function(){var o={},r={};return function(t,e){for(var n in t)r[n]=t[n];for(var i=0;i<e.length;i++)!function t(e){if(!o[e]){if(!r[e])throw new Error("Cannot find module: "+e);var n=o[e]={exports:{}};r[e].call(n.exports,t,n,n.exports)}return o[e].exports}(e[i])}}();register({0:function(t,e,n){n.UI_Bag=void 0;var i,o=(i=fgui.GComponent,__extends(r,i),r.createInstance=function(){return fgui.UIPackage.createObject("bag","Bag")},r.prototype.constructFromXML=function(t){i.prototype.constructFromXML.call(this,t);t=this;t.ctrl_type=t.getControllerAt(0),t.ctrl_empty=t.getControllerAt(1),t.comp_dlg=t.getChildAt(0),t.list_item=t.getChildAt(2),t.btn_equip=t.getChildAt(3),t.btn_item=t.getChildAt(4),t.btn_petEgg=t.getChildAt(5),t.btn_gift=t.getChildAt(6),t.btn_material=t.getChildAt(7)},r.URL="ui://rczxf1n8r4i00",r.PKG="bag",r.NAME="UIBag",r);function r(){return null!==i&&i.apply(this,arguments)||this}n.UI_Bag=o},1:function(t,e,n){n.getLogger=void 0,n.getLogger=god.getLogger},2:function(t,e,i){i.resetCm=i.cm=i.registerCtrlClazz=i.ctrlClazzMap=i.ctrlInstMap=void 0;var o=t("1");function r(t){if(!i.ctrlInstMap[t]){var e=i.ctrlClazzMap[t];if(!e)throw new Error("\u63a7\u5236\u5668\u7c7b\u672a\u6ce8\u518c:"+t);i.ctrlInstMap[t]=new e,i.ctrlInstMap[t].onCreate(),function(e){var t=e.constructor.KEY;if("object"==typeof t&&!god.OBJ.isEmpty(t))for(var n in t)!function(i){var t=e[i];Object.defineProperty(e,i,{get:function(){return this["$_"+i]},set:function(t){var e,n=this;n["$_"+i]!=t&&(e=n[i],n["$_"+i]=t,n.emit(i,e,t))}}),null!=t&&(e[i]=t)}(n)}(i.ctrlInstMap[t])}return i.ctrlInstMap[t]}i.ctrlInstMap={},i.ctrlClazzMap={},i.registerCtrlClazz=function(t){var e,n=t.NAME;if(!n)throw new Error("\u63a7\u5236\u5668\u7c7b \u6ca1\u6709\u5b9a\u4e49NAME => "+t);i.ctrlClazzMap[n]?o.getLogger().warn("\u63a7\u5236\u5668\u7c7b\u5df2\u6ce8\u518c:"+n):(i.ctrlClazzMap[n]=t,e=n,Object.defineProperty(i.cm,e,{get:function(){return r(e)}}))},i.cm={},i.resetCm=function(){for(var t in i.ctrlInstMap)i.ctrlInstMap[t]._onDisPose();i.ctrlInstMap={}}},3:function(t,e,n){n.UIBag=void 0;var i,o=t("0"),r=t("2"),o=(i=o.UI_Bag,__extends(s,i),s.prototype.onCreate=function(){var t=this;t.grayAlpha=.5,t.grayEnabled=!0,t.comp_dlg.setUIData({inst:t}),t.list_item.setVirtual(),t.refreshUI()},s.prototype.change_ctrl_type=function(){this.refreshUI()},s.prototype.refreshUI=function(){var t=this,e=Number(t.ctrl_type.selectedPage);t.goodsList=r.cm.bagCtrl.getGoodsListByType(e),t.list_item.numItems=t.goodsList.length,t.ctrl_empty.selectedIndex=t.goodsList.length?0:1},s.prototype.render_list_item=function(t,e){t=this.goodsList[t];e.setUIData({goodsNum:t.num,goodsInfo:t.goodsInfo,backpackId:t.backpackId})},s);function s(){var t=null!==i&&i.apply(this,arguments)||this;return t.trayName=god.TrayName.dlg,t}n.UIBag=o},4:function(t,e,n){n.UI_Border=void 0;var i,o=(i=fgui.GComponent,__extends(r,i),r.createInstance=function(){return fgui.UIPackage.createObject("com","Border")},r.prototype.constructFromXML=function(t){i.prototype.constructFromXML.call(this,t);t=this;t.rect_up=t.getChildAt(0),t.rect_down=t.getChildAt(1),t.rect_left=t.getChildAt(2),t.rect_right=t.getChildAt(3)},r.URL="ui://4ilspb0vxu3a9",r.PKG="com",r.NAME="UIBorder",r);function r(){return null!==i&&i.apply(this,arguments)||this}n.UI_Border=o},5:function(t,e,n){n.UIBorder=void 0;var i,t=t("4"),t=(i=t.UI_Border,__extends(o,i),o);function o(){var t=null!==i&&i.apply(this,arguments)||this;return t.trayName=god.TrayName.border,t}n.UIBorder=t},6:function(t,e,n){n.UI_Dialog1=void 0;var i,o=(i=fgui.GLabel,__extends(r,i),r.createInstance=function(){return fgui.UIPackage.createObject("com","Dialog1")},r.prototype.constructFromXML=function(t){i.prototype.constructFromXML.call(this,t);this.btn_gb=this.getChildAt(2)},r.URL="ui://4ilspb0voi62a",r.PKG="com",r.NAME="UIDialog1",r);function r(){return null!==i&&i.apply(this,arguments)||this}n.UI_Dialog1=o},7:function(t,e,n){n.UIDialog1=void 0;var i,t=t("6"),t=(i=t.UI_Dialog1,__extends(o,i),o.prototype.tap_btn_gb=function(){var t=this.uiData;t.closeCallback?t.closeCallback():t.inst.close()},o);function o(){return null!==i&&i.apply(this,arguments)||this}n.UIDialog1=t},8:function(t,e,n){n.UI_Dialog2=void 0;var i,o=(i=fgui.GLabel,__extends(r,i),r.createInstance=function(){return fgui.UIPackage.createObject("com","Dialog2")},r.prototype.constructFromXML=function(t){i.prototype.constructFromXML.call(this,t);this.btn_gb=this.getChildAt(2)},r.URL="ui://4ilspb0voi62b",r.PKG="com",r.NAME="UIDialog2",r);function r(){return null!==i&&i.apply(this,arguments)||this}n.UI_Dialog2=o},9:function(t,e,n){n.UIDialog2=void 0;var i,t=t("8"),t=(i=t.UI_Dialog2,__extends(o,i),o.prototype.tap_btn_gb=function(){var t=this.uiData;t.closeCallback?t.closeCallback():t.inst.close()},o);function o(){return null!==i&&i.apply(this,arguments)||this}n.UIDialog2=t},10:function(t,e,n){n.UI_Fixed=void 0;var i,o=(i=fgui.GComponent,__extends(r,i),r.createInstance=function(){return fgui.UIPackage.createObject("com","Fixed")},r.prototype.constructFromXML=function(t){i.prototype.constructFromXML.call(this,t);this.comp_msg=this.getChildAt(0)},r.URL="ui://4ilspb0vjssi3",r.PKG="com",r.NAME="UIFixed",r);function r(){return null!==i&&i.apply(this,arguments)||this}n.UI_Fixed=o},11:function(t,e,n){n.UI_MsgTip=void 0;var i,o=(i=fgui.GComponent,__extends(r,i),r.createInstance=function(){return fgui.UIPackage.createObject("com","MsgTip")},r.prototype.constructFromXML=function(t){i.prototype.constructFromXML.call(this,t);this.label_content=this.getChildAt(0)},r.URL="ui://4ilspb0vjssi2",r.PKG="com",r.NAME="UIMsgTip",r);function r(){return null!==i&&i.apply(this,arguments)||this}n.UI_MsgTip=o},12:function(t,e,n){n.UIMsgTip=void 0;var i,t=t("11"),t=(i=t.UI_MsgTip,__extends(o,i),o.prototype.dataChanged=function(){this.label_content.text=this.uiData.content},o);function o(){return null!==i&&i.apply(this,arguments)||this}n.UIMsgTip=t},13:function(t,e,n){n.UIFixed=void 0;var i,o=t("10"),r=t("12"),o=(i=o.UI_Fixed,__extends(s,i),s.prototype.onCreate=function(){this.onEmitter(god.Emitter.inst,2,this.onMsgFly)},s.prototype.onMsgFly=function(t){var e=this.comp_msg,n=r.UIMsgTip.createInstance();n.setUIData({content:t}),n.x=this.width/2,n.y=this.height/2-200,e.addChild(n);e=n.y;egret.Tween.get(n).to({y:e-75},400).to({alpha:0,y:e-150},400).call(function(){n.parent&&n.parent.removeChild(n,!0)})},s);function s(){var t=null!==i&&i.apply(this,arguments)||this;return t.trayName=god.TrayName.fixed,t}n.UIFixed=o},14:function(t,e,n){n.UI_ItemIcon=void 0;var i,o=(i=fgui.GComponent,__extends(r,i),r.createInstance=function(){return fgui.UIPackage.createObject("com","ItemIcon")},r.prototype.constructFromXML=function(t){i.prototype.constructFromXML.call(this,t);t=this;t.ctrl_raity=t.getControllerAt(0),t.label_num=t.getChildAt(2),t.label_name=t.getChildAt(3)},r.URL="ui://4ilspb0vr4i07",r.PKG="com",r.NAME="UIItemIcon",r);function r(){return null!==i&&i.apply(this,arguments)||this}n.UI_ItemIcon=o},15:function(t,e,n){n.UIItemIcon=void 0;var i,t=t("14"),t=(i=t.UI_ItemIcon,__extends(o,i),o.prototype.dataChanged=function(){var t=this.uiData,e=t.goodsInfo;this.ctrl_raity.selectedPage=String(e.rarityLevel),this.label_num.text=String(t.goodsNum),this.label_name.text=e.name},o);function o(){return null!==i&&i.apply(this,arguments)||this}n.UIItemIcon=t},16:function(t,e,n){n.UI_MenuDown=void 0;var i,o=(i=fgui.GComponent,__extends(r,i),r.createInstance=function(){return fgui.UIPackage.createObject("com","MenuDown")},r.prototype.constructFromXML=function(t){i.prototype.constructFromXML.call(this,t);t=this;t.ctrl_type=t.getControllerAt(0),t.btn_city=t.getChildAt(0),t.btn_bag=t.getChildAt(1),t.btn_my=t.getChildAt(3)},r.URL="ui://4ilspb0vm50z8",r.PKG="com",r.NAME="UIMenuDown",r);function r(){return null!==i&&i.apply(this,arguments)||this}n.UI_MenuDown=o},17:function(t,e,n){n.UIMenuDown=void 0;var i,o=t("16"),r=t("3"),o=(i=o.UI_MenuDown,__extends(s,i),s.prototype.onCreate=function(){},s.prototype.tap_btn_bag=function(){god.show(r.UIBag.NAME)},s);function s(){return null!==i&&i.apply(this,arguments)||this}n.UIMenuDown=o},18:function(t,e,n){var i;n.cfg=void 0,(i=n.cfg||(n.cfg={})).Code="Code",i.getCode=function(t){return god.D.get(i.Code,t)},i.getCodeAll=function(){return god.D.all(i.Code)}},19:function(t,e,n){n.UI_MsgDlg=void 0;var i,o=(i=fgui.GComponent,__extends(r,i),r.createInstance=function(){return fgui.UIPackage.createObject("com","MsgDlg")},r.prototype.constructFromXML=function(t){i.prototype.constructFromXML.call(this,t);t=this;t.ctrl_type=t.getControllerAt(0),t.label_cotent=t.getChildAt(2),t.btn_cancel=t.getChildAt(3),t.btn_confirm=t.getChildAt(4),t.btn_ok=t.getChildAt(6),t.label_title=t.getChildAt(8)},r.URL="ui://4ilspb0vjssi1",r.PKG="com",r.NAME="UIMsgDlg",r);function r(){return null!==i&&i.apply(this,arguments)||this}n.UI_MsgDlg=o},20:function(t,e,n){n.UIMsgDlg=void 0;var i,o=t("18"),t=t("19"),t=(i=t.UI_MsgDlg,__extends(r,i),r.prototype.onCreate=function(){var t=this,e=t.uiData.showInfo,n=e.code,i=o.cfg.getCode(n);i.title&&(t.label_title.text=i.title);n=i.btnTxt;n&&(1==n.length?t.btn_ok.getTextField().text=n[0]:(t.btn_cancel.getTextField().text=n[0],t.btn_confirm.getTextField().text=n[1])),1==i.type?t.ctrl_type.selectedIndex=0:2==i.type&&(t.ctrl_type.selectedIndex=1);i=i.content,e=e.params;e&&(i=god.STR.relpace(i,e)),t.label_cotent.text=i},r.prototype.tap_btn_ok=function(){var t=this.uiData.showInfo.okCb;t&&t(),this.close()},r.prototype.tap_btn_cancel=function(){this.close()},r.prototype.tap_btn_confirm=function(){var t=this.uiData.showInfo.okCb;t&&t(),this.close()},r);function r(){var t=null!==i&&i.apply(this,arguments)||this;return t.trayName=god.TrayName.dlg,t}n.UIMsgDlg=t},21:function(t,e,n){n.UI_HomeCity=void 0;var i,o=(i=fgui.GComponent,__extends(r,i),r.createInstance=function(){return fgui.UIPackage.createObject("home","HomeCity")},r.prototype.constructFromXML=function(t){i.prototype.constructFromXML.call(this,t);t=this;t.btn_city=t.getChildAt(0),t.btn_pet=t.getChildAt(1),t.btn_iron=t.getChildAt(2),t.btn_shop=t.getChildAt(3),t.btn_warehouse=t.getChildAt(4),t.btn_task=t.getChildAt(5),t.btn_skill=t.getChildAt(6),t.btn_activity=t.getChildAt(7),t.btn_sign=t.getChildAt(8),t.btn_mail=t.getChildAt(9)},r.URL="ui://49hku9vegzk13",r.PKG="home",r.NAME="UIHomeCity",r);function r(){return null!==i&&i.apply(this,arguments)||this}n.UI_HomeCity=o},22:function(t,e,n){n.UI_Mail=void 0;var i,o=(i=fgui.GComponent,__extends(r,i),r.createInstance=function(){return fgui.UIPackage.createObject("mail","Mail")},r.prototype.constructFromXML=function(t){i.prototype.constructFromXML.call(this,t);t=this;t.ctrl_empty=t.getControllerAt(0),t.comp_dlg=t.getChildAt(0),t.list_item=t.getChildAt(2),t.btn_del=t.getChildAt(4),t.btn_get=t.getChildAt(5)},r.URL="ui://vghdml1s9jvn0",r.PKG="mail",r.NAME="UIMail",r);function r(){return null!==i&&i.apply(this,arguments)||this}n.UI_Mail=o},23:function(t,e,n){n.UI_MailDetail=void 0;var i,o=(i=fgui.GComponent,__extends(r,i),r.createInstance=function(){return fgui.UIPackage.createObject("mail","MailDetail")},r.prototype.constructFromXML=function(t){i.prototype.constructFromXML.call(this,t);t=this;t.ctrl_state=t.getControllerAt(0),t.comp_dlg=t.getChildAt(0),t.label_title=t.getChildAt(4),t.label_content=t.getChildAt(5),t.list_item=t.getChildAt(6),t.btn_get=t.getChildAt(7)},r.URL="ui://vghdml1soi622",r.PKG="mail",r.NAME="UIMailDetail",r);function r(){return null!==i&&i.apply(this,arguments)||this}n.UI_MailDetail=o},24:function(t,e,n){n.UIMailDetail=void 0;var i,o=t("23"),r=t("2"),o=(i=o.UI_MailDetail,__extends(s,i),s.prototype.onCreate=function(){var t=this;t.grayAlpha=.5,t.grayEnabled=!0,t.comp_dlg.setUIData({inst:t}),t.refreshUI(),t.onEmitter(r.cm.mailCtrl,1,t.refreshUI)},s.prototype.refreshUI=function(){var t=this,e=t.uiData.mailInfo;t.label_title.text=e.name,t.label_content.text=e.msg,t.mailGoodsList=e.goodsList,t.list_item.numItems=t.mailGoodsList.length,t.mailGoodsList.length?e.isReceive?t.ctrl_state.selectedIndex=2:t.ctrl_state.selectedIndex=1:t.ctrl_state.selectedIndex=0},s.prototype.render_list_item=function(t,e){t=this.mailGoodsList[t];e.setUIData({goodsInfo:t.goodsInfo,goodsNum:t.num})},s.prototype.tap_btn_get=function(){r.cm.mailCtrl.CS_ReceiveMailGoods(this.uiData.mailInfo.id)},s);function s(){var t=null!==i&&i.apply(this,arguments)||this;return t.trayName=god.TrayName.dlg,t}n.UIMailDetail=o},25:function(t,e,n){n.UIMail=void 0;var i,o=t("22"),r=t("2"),s=t("24"),o=(i=o.UI_Mail,__extends(a,i),a.prototype.onCreate=function(){var t=this;t.grayAlpha=.5,t.grayEnabled=!0,t.comp_dlg.setUIData({inst:t}),t.list_item.setVirtual(),t.refreshUI(),t.onEmitter(r.cm.mailCtrl,1,t.refreshUI)},a.prototype.refreshUI=function(){this.list_item.numItems=r.cm.mailCtrl.mailList.length,this.ctrl_empty.selectedIndex=r.cm.mailCtrl.mailList.length?0:1},a.prototype.render_list_item=function(t,e){e.setUIData({mailInfo:r.cm.mailCtrl.mailList[t]})},a.prototype.click_list_item=function(t){t=t.itemObject.uiData.mailInfo;god.show(s.UIMailDetail.NAME,{mailInfo:t})},a.prototype.tap_btn_del=function(){r.cm.mailCtrl.CS_DelMail()},a.prototype.tap_btn_get=function(){for(var t=this,e=r.cm.mailCtrl.mailList,n=0,i=e.length;n<i;n++){var o=e[n];!o.isReceive&&o.goodsList.length&&r.cm.mailCtrl.CS_DelMail(o.id)}t.btn_get.touchable=!1,t.setTimeout(function(){t.btn_get.touchable=!0},500)},a);function a(){var t=null!==i&&i.apply(this,arguments)||this;return t.trayName=god.TrayName.dlg,t}n.UIMail=o},26:function(t,e,n){n.UI_Sign=void 0;var i,o=(i=fgui.GComponent,__extends(r,i),r.createInstance=function(){return fgui.UIPackage.createObject("sign","Sign")},r.prototype.constructFromXML=function(t){i.prototype.constructFromXML.call(this,t);t=this;t.comp_dlg=t.getChildAt(0),t.list_item=t.getChildAt(2),t.label_total=t.getChildAt(3)},r.URL="ui://30yi2x95m50z0",r.PKG="sign",r.NAME="UISign",r);function r(){return null!==i&&i.apply(this,arguments)||this}n.UI_Sign=o},27:function(t,e,n){n.utils=void 0;var i=t("18"),o=t("19");(n=n.utils||(n.utils={})).setVar=function(t,e,n){(t=t instanceof fairygui.GLabel?t.getTextField():t).setVar(e,String(n)).flushVars()},n.setVars=function(t,e){for(var n in t instanceof fairygui.GLabel&&(t=t.getTextField()),e)e[n]=String(e[n]);t.templateVars=e},n.showMsg=function(t){var e=t.code,n=t.params=t.params||[];(e=i.cfg.getCode(e)).type?god.Emitter.inst.emit(1,o.UI_MsgDlg.NAME,{showInfo:t}):(e=e.content,n.length&&(e=god.STR.relpace(e,n)),god.Emitter.inst.emit(2,e))},n.showMsgText=function(t){god.Emitter.inst.emit(2,t)}},28:function(t,e,n){n.UISign=void 0;var i,o=t("26"),r=t("2"),s=t("27"),o=(i=o.UI_Sign,__extends(a,i),a.prototype.onCreate=function(){var t=this;t.grayAlpha=.5,t.grayEnabled=!0,t.comp_dlg.setUIData({inst:t}),t.list_item.setVirtual(),t.refreshUI(),t.onEmitter(r.cm.signCtrl,1,t.refreshUI)},a.prototype.refreshUI=function(){this.list_item.numItems=r.cm.signCtrl.signRewardList.length,s.utils.setVar(this.label_total,"v",r.cm.signCtrl.signNum)},a.prototype.render_list_item=function(t,e){var n=r.cm.signCtrl.signRewardList[t];e.setUIData({idx:t,goodsInfo:n.goodsInfo,goodsNum:n.num,signNum:r.cm.signCtrl.signNum,lastSignTime:r.cm.signCtrl.lastSignTime,proxy:this})},a);function a(){var t=null!==i&&i.apply(this,arguments)||this;return t.trayName=god.TrayName.dlg,t}n.UISign=o},29:function(t,e,n){n.UIHomeCity=void 0;var i,o=t("21"),r=t("25"),s=t("28"),o=(i=o.UI_HomeCity,__extends(a,i),a.prototype.tap_btn_sign=function(){god.show(s.UISign.NAME)},a.prototype.tap_btn_mail=function(){god.show(r.UIMail.NAME)},a);function a(){var t=null!==i&&i.apply(this,arguments)||this;return t.trayName=god.TrayName.mutex,t}n.UIHomeCity=o},30:function(t,e,n){n.UI_Index=void 0;var i,o=(i=fgui.GComponent,__extends(r,i),r.createInstance=function(){return fgui.UIPackage.createObject("index","Index")},r.prototype.constructFromXML=function(t){i.prototype.constructFromXML.call(this,t);t=this;t.ctrl_state=t.getControllerAt(0),t.input_account=t.getChildAt(3),t.input_pwd=t.getChildAt(6),t.btn_register=t.getChildAt(7),t.btn_login=t.getChildAt(8),t.btn_start=t.getChildAt(11),t.label_serverName=t.getChildAt(12),t.btn_change=t.getChildAt(13),t.list_server=t.getChildAt(15),t.input_name=t.getChildAt(19),t.btn_create=t.getChildAt(21)},r.URL="ui://4yqp8qfvgcxo0",r.PKG="index",r.NAME="UIIndex",r);function r(){return null!==i&&i.apply(this,arguments)||this}n.UI_Index=o},31:function(t,e,n){n.HttpMgr=void 0;var o=t("1"),r=t("27"),t=(Object.defineProperty(s,"inst",{get:function(){return this._inst||(this._inst=new s),this._inst},enumerable:!1,configurable:!0}),s.prototype.request=function(t,e,n,i){e=e||{},this.user_token&&(e.user_token=this.user_token),e.requestId=s.requestId++,god.HttpRequest.create({url:(i||this.host)+t,data:e,method:god.HttpRequestType.GET,callback:function(t,e){t?r.utils.showMsg({code:2}):(o.getLogger().log(e),401==(t=e.code)?r.utils.showMsg({code:3,okCb:function(){egret.callLater(function(){god.Emitter.inst.emit(god.EmitterEvent.$$reload)},null)}}):400==t?r.utils.showMsgText(e.msg):500==t?r.utils.showMsg({code:4}):200==t?(n(e.result,e.msg),e.goodsChange&&god.Emitter.inst.emit(3,e.goodsChange),e.equipmentChange&&god.Emitter.inst.emit(4,e.equipmentChange)):r.utils.showMsg({code:5}))}})},s.requestId=0,s);function s(){}n.HttpMgr=t},32:function(t,e,n){n.UI_Loading=void 0;var i,o=(i=fgui.GComponent,__extends(r,i),r.createInstance=function(){return fgui.UIPackage.createObject("loading","Loading")},r.prototype.constructFromXML=function(t){i.prototype.constructFromXML.call(this,t);this.label_progress=this.getChildAt(0)},r.URL="ui://4c74ih6fgcxo0",r.PKG="loading",r.NAME="UILoading",r);function r(){return null!==i&&i.apply(this,arguments)||this}n.UI_Loading=o},33:function(t,e,n){n.UILoading=void 0;var i,o=t("32"),r=t("1"),s=t("27"),a=t("29"),o=(i=o.UI_Loading,__extends(l,i),l.prototype.onCreate=function(){var t=new god.LazyLoad;t.baseBin="resource/data/data.bin",t.langBin="resource/data/data_"+god.getLang()+".bin",t.load(this.progressHandle.bind(this))},l.prototype.progressHandle=function(t,e){var n=this;r.getLogger().log("\u540e\u52a0\u8f7d\u8fdb\u5ea6\uff1a"+t+"/"+e),s.utils.setVars(n.label_progress,{v1:t,v2:e}),t==e&&n.setTimeout(function(){n.onLoadFinish()},500)},l.prototype.onLoadFinish=function(){god.show(a.UIHomeCity.NAME)},l);function l(){var t=null!==i&&i.apply(this,arguments)||this;return t.trayName=god.TrayName.full,t}n.UILoading=o},34:function(t,e,n){n.UIIndex=void 0;var i,o=t("30"),r=t("2"),s=t("31"),a=t("27"),l=t("33"),o=(i=o.UI_Index,__extends(c,i),c.prototype.onCreate=function(){var t=this;t.list_server.setVirtual();var e=egret.localStorage.getItem("account");e&&(t.input_account.text=e);e=egret.localStorage.getItem("password");e&&(t.input_pwd.text=e),t.onEmitter(r.cm.indexCtrl,0,t.onReturnServerList),t.onEmitter(r.cm.indexCtrl,1,t.onAccountLoginSucc),t.onEmitter(r.cm.indexCtrl,2,t.onUserCreateSucc),t.onEmitter(r.cm.indexCtrl,3,t.onNotCreate),t.onEmitter(r.cm.indexCtrl,4,t.onReturnUserInfo)},c.prototype.onReturnServerList=function(t){var e=this;1==e.ctrl_state.selectedIndex&&(e.ctrl_state.selectedIndex=2,e.serverList=t,e.list_server.numItems=e.serverList.length)},c.prototype.onAccountLoginSucc=function(){this.ctrl_state.selectedIndex=1,this.refreshServerInfo(),egret.localStorage.setItem("account",this.input_account.text),egret.localStorage.setItem("password",this.input_pwd.text)},c.prototype.onUserCreateSucc=function(){this.tap_btn_start()},c.prototype.onNotCreate=function(){this.ctrl_state.selectedIndex=3},c.prototype.onReturnUserInfo=function(){god.show(l.UILoading.NAME)},c.prototype.tap_btn_register=function(){var t,e=this.input_account.text;e?(t=this.input_pwd.text)?r.cm.indexCtrl.CS_AccountRegister(e,t):a.utils.showMsg({code:7}):a.utils.showMsg({code:6})},c.prototype.tap_btn_login=function(){var t,e=this.input_account.text;e?(t=this.input_pwd.text)?r.cm.indexCtrl.CS_AccountLogin(e,t):a.utils.showMsg({code:7}):a.utils.showMsg({code:6})},c.prototype.tap_btn_start=function(){r.cm.indexCtrl.CS_GetUserInfo()},c.prototype.tap_btn_create=function(){var t=this.input_name.text;t?r.cm.indexCtrl.CS_UserCreate(t):a.utils.showMsg({code:9})},c.prototype.tap_btn_change=function(){r.cm.indexCtrl.CS_GetServerList()},c.prototype.render_list_server=function(t,e){e.setUIData({serverInfo:this.serverList[t]})},c.prototype.click_list_server=function(t){t=t.itemObject.uiData.serverInfo;r.cm.indexCtrl.curServerInfo=t,s.HttpMgr.inst.host=t.serverHost,this.ctrl_state.selectedIndex=1,this.refreshServerInfo()},c.prototype.refreshServerInfo=function(){this.label_serverName.text=r.cm.indexCtrl.curServerInfo.serverName},c);function c(){var t=null!==i&&i.apply(this,arguments)||this;return t.trayName=god.TrayName.mutex,t}n.UIIndex=o},35:function(t,e,n){n.UI_IndexServerItem=void 0;var i,o=(i=fgui.GButton,__extends(r,i),r.createInstance=function(){return fgui.UIPackage.createObject("index","IndexServerItem")},r.prototype.constructFromXML=function(t){i.prototype.constructFromXML.call(this,t);this.label_name=this.getChildAt(1)},r.URL="ui://4yqp8qfvgzk11",r.PKG="index",r.NAME="UIIndexServerItem",r);function r(){return null!==i&&i.apply(this,arguments)||this}n.UI_IndexServerItem=o},36:function(t,e,n){n.UIIndexServerItem=void 0;var i,t=t("35"),t=(i=t.UI_IndexServerItem,__extends(o,i),o.prototype.dataChanged=function(){this.label_name.text=this.uiData.serverInfo.serverName},o);function o(){return null!==i&&i.apply(this,arguments)||this}n.UIIndexServerItem=t},37:function(t,e,n){n.UI_MailItem=void 0;var i,o=(i=fgui.GButton,__extends(r,i),r.createInstance=function(){return fgui.UIPackage.createObject("mail","MailItem")},r.prototype.constructFromXML=function(t){i.prototype.constructFromXML.call(this,t);this.ctrl_state=this.getControllerAt(0),this.label_title=this.getChildAt(1)},r.URL="ui://vghdml1s9jvn1",r.PKG="mail",r.NAME="UIMailItem",r);function r(){return null!==i&&i.apply(this,arguments)||this}n.UI_MailItem=o},38:function(t,e,n){n.UIMailItem=void 0;var i,t=t("37"),t=(i=t.UI_MailItem,__extends(o,i),o.prototype.dataChanged=function(){var t=this,e=t.uiData.mailInfo;t.label_title.text=e.name,e.goodsList.length?e.isReceive?t.ctrl_state.selectedIndex=2:t.ctrl_state.selectedIndex=1:t.ctrl_state.selectedIndex=0},o);function o(){return null!==i&&i.apply(this,arguments)||this}n.UIMailItem=t},39:function(t,e,n){n.UI_SignItem=void 0;var i,o=(i=fgui.GComponent,__extends(r,i),r.createInstance=function(){return fgui.UIPackage.createObject("sign","SignItem")},r.prototype.constructFromXML=function(t){i.prototype.constructFromXML.call(this,t);t=this;t.ctrl_day=t.getControllerAt(0),t.ctrl_state=t.getControllerAt(1),t.comp_item=t.getChildAt(0)},r.URL="ui://30yi2x95m50z1",r.PKG="sign",r.NAME="UISignItem",r);function r(){return null!==i&&i.apply(this,arguments)||this}n.UI_SignItem=o},40:function(t,e,n){n.UISignItem=void 0;var i,o=t("39"),r=t("2"),o=(i=o.UI_SignItem,__extends(s,i),s.prototype.dataChanged=function(){var t=this,e=t.uiData;t.ctrl_day.selectedIndex=e.idx,t.comp_item.setUIData({goodsNum:e.goodsNum,goodsInfo:e.goodsInfo});var n=e.signNum%7;e.idx<=n?e.idx<n?(t.ctrl_state.selectedIndex=2,t.comp_item.touchable=!1):god.DATE.isSameDay(god.DATE.now(),1e3*e.lastSignTime)?(t.ctrl_state.selectedIndex=0,t.comp_item.touchable=!1):(t.ctrl_state.selectedIndex=1,t.comp_item.touchable=!0):(t.ctrl_state.selectedIndex=0,t.comp_item.touchable=!1)},s.prototype.tap_comp_item=function(){r.cm.signCtrl.CS_UserSign()},s);function s(){return null!==i&&i.apply(this,arguments)||this}n.UISignItem=o},41:function(t,e,n){n.UI_Wait=void 0;var i,o=(i=fgui.GComponent,__extends(r,i),r.createInstance=function(){return fgui.UIPackage.createObject("wait","Wait")},r.prototype.constructFromXML=function(t){i.prototype.constructFromXML.call(this,t);this.mv_wait=this.getChildAt(0)},r.URL="ui://3zepfamgr5zx1",r.PKG="wait",r.NAME="UIWait",r);function r(){return null!==i&&i.apply(this,arguments)||this}n.UI_Wait=o},42:function(t,e,n){n.UIWait=void 0;var i,t=t("41"),t=(i=t.UI_Wait,__extends(o,i),o.prototype.onCreate=function(){var t=this;t.count=0,t.visible=!1,t.onEmitter(god.Emitter.inst,god.EmitterEvent.$$waitAdd,t.add),t.onEmitter(god.Emitter.inst,god.EmitterEvent.$$waitSub,t.remove)},o.prototype.add=function(){this.count++,this.visible=!0},o.prototype.remove=function(){this.count--,this.count<=0&&(this.count=0,this.visible=!1)},o);function o(){var t=null!==i&&i.apply(this,arguments)||this;return t.trayName=god.TrayName.wait,t}n.UIWait=t},43:function(t,e,n){n.UIBinder=void 0;var i=t("3"),o=t("5"),r=t("7"),s=t("9"),a=t("13"),l=t("15"),c=t("17"),u=t("20"),g=t("12"),d=t("29"),p=t("34"),m=t("36"),f=t("33"),h=t("25"),_=t("24"),I=t("38"),v=t("28"),y=t("40"),C=t("42");n.UIBinder=function(){!function(t){for(var e=0,n=t.length;e<n;e++)god.setPkgExt(t[e])}([o.UIBorder,a.UIFixed,u.UIMsgDlg,g.UIMsgTip,l.UIItemIcon,c.UIMenuDown,r.UIDialog1,s.UIDialog2,p.UIIndex,m.UIIndexServerItem,d.UIHomeCity,i.UIBag,v.UISign,y.UISignItem,f.UILoading,C.UIWait,h.UIMail,I.UIMailItem,_.UIMailDetail])}},44:function(t,e,n){n.getLogger=void 0,n.getLogger=god.getLogger},45:function(t,e,n){n.resetRm=n.unregisterRedClazz=n.registerRedClazz=n.removeRedInst=n.getRedInst=n.redClazzMap=n.redInstMap=void 0;var i=t("44");function o(t){if(!n.redInstMap[t]){var e=n.redClazzMap[t];if(!e)throw new Error("\u7ea2\u70b9\u7c7b\u672a\u6ce8\u518c:"+t);n.redInstMap[t]=new e(t)}return n.redInstMap[t]}n.redInstMap={},n.redClazzMap={},n.getRedInst=o,n.removeRedInst=function(t){var e=n.redInstMap[t];e?(god.Emitter.inst.emit(god.EmitterEvent.$$redEnd,e),e._onDisPose(),delete n.redInstMap[t]):i.getLogger().warn("\u7ea2\u70b9\u5b9e\u4f8b\u672a\u627e\u5230:"+t)},n.registerRedClazz=function(t,e){n.redClazzMap[t]?i.getLogger().warn("\u7ea2\u70b9\u7c7b\u5df2\u6ce8\u518c:"+t):n.redClazzMap[t]=e},n.unregisterRedClazz=function(t){delete n.redClazzMap[t]},n.resetRm=function(){for(var t in n.redInstMap)n.redInstMap[t]._onDisPose();n.redInstMap={}},god.Emitter.inst.on(god.EmitterEvent.$$redState,function(t,e){t=o(t);e(!!t&&t.isRed)})},46:function(t,e,n){n.clazzinster=void 0;var i=t("2"),o=t("45");n.clazzinster=function(){!function(){for(var t in i.ctrlClazzMap)i.cm[t]}(),function(){for(var t in o.redClazzMap)o.getRedInst(t);god.Emitter.inst.emit(god.EmitterEvent.$$redStart)}()}},47:function(t,e,n){n.Emitter=void 0;var i,o=(i=god.Emitter,__extends(r,i),Object.defineProperty(r.prototype,"$$timeoutKeys",{get:function(){return this._timeoutKeys||(this._timeoutKeys=[]),this._timeoutKeys},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"$$intervalKeys",{get:function(){return this._intervalKeys||(this._intervalKeys=[]),this._intervalKeys},enumerable:!1,configurable:!0}),r.prototype.onCreate=function(){},r.prototype.onDisPose=function(){},r.prototype._onDisPose=function(){for(var t=this,e=t.$$intervalKeys,n=0,i=e.length;n<i;n++)egret.clearInterval(e[n]);t._intervalKeys=null;for(var o=t.$$timeoutKeys,n=0,i=o.length;n<i;n++)egret.clearTimeout(o[n]);t._timeoutKeys=null,t.unAllEmitter(),t.unAll(),t.onDisPose(),t.isDispose=!0},r.prototype.setInterval=function(t,e){var n=this.$$intervalKeys,e=egret.setInterval(t,this,e);return n.push(e),e},r.prototype.clearInterval=function(t){var e,n;t&&(0<=(n=(e=this.$$intervalKeys).indexOf(t))&&e.splice(n,1),egret.clearInterval(t))},r.prototype.setTimeout=function(t,e){var n=this.$$timeoutKeys,e=egret.setTimeout(t,this,e);return n.push(e),e},r.prototype.clearTimeout=function(t){var e,n;t&&(0<=(n=(e=this.$$timeoutKeys).indexOf(t))&&e.splice(n,1),egret.clearTimeout(t))},r.prototype.onEmitter=function(t,e,n){var i=(i=this.emitters)||(this.emitters=[]);t.on(e,n,this);for(var o=!0,r=0,s=i.length;r<s;r++)if(i[r]==t){o=!1;break}o&&i.push(t)},r.prototype.unEmitter=function(t,e){if(this.emitters)for(var n=this.emitters,i=0,o=n.length;i<o;i++)if(t==n[i]){n[i].un(e,this);break}},r.prototype.unAllEmitter=function(){if(this.emitters){for(var t=this.emitters,e=0,n=t.length;e<n;e++)t[e].unCtx(this);this.emitters=null}},r);function r(){return null!==i&&i.apply(this,arguments)||this}n.Emitter=o},48:function(t,e,n){n.BaseCtrl=void 0;var i,t=t("47"),t=(i=t.Emitter,__extends(o,i),o.prototype.setField=function(t){for(var e in t)this[e]=t[e]},o);function o(){return null!==i&&i.apply(this,arguments)||this}n.BaseCtrl=t},49:function(t,e,n){n.BagCtrl=void 0;var i,o=t("48"),r=t("31"),o=(i=o.BaseCtrl,__extends(s,i),s.prototype.onCreate=function(){this.goodsMap={}},s.prototype.getGoodsListByType=function(t){return this.goodsMap[t]},s.prototype.CS_GetBagInfo=function(e){var n=this;r.HttpMgr.inst.request("/Api/User/UserBackpack/getList",{goodsType:e},function(t){n.goodsMap[e]=t.list,n.emit(0)})},s.NAME="bagCtrl",s);function s(){return null!==i&&i.apply(this,arguments)||this}n.BagCtrl=o},50:function(t,e,n){n.IndexCtrl=void 0;var i,o=t("48"),r=t("2"),s=t("31"),a=t("1"),l=t("27"),o=(i=o.BaseCtrl,__extends(c,i),Object.defineProperty(c.prototype,"curServerInfo",{get:function(){return this._curServerInfo},set:function(t){this._curServerInfo=t,s.HttpMgr.inst.host=t.serverHost},enumerable:!1,configurable:!0}),c.prototype.CS_GetServerList=function(){var n=this;s.HttpMgr.inst.request("/Api/Common/Server/getList",{},function(t,e){n.emit(0,t.list)},god.project.myApiUrl)},c.prototype.CS_AccountRegister=function(t,e){s.HttpMgr.inst.request("/Api/User/Auth/register",{account:t,password:e},function(t,e){l.utils.showMsgText(e)},god.project.myApiUrl)},c.prototype.CS_AccountLogin=function(t,e){var n=this;s.HttpMgr.inst.request("/Api/User/Auth/login",{account:t,password:e},function(t,e){s.HttpMgr.inst.user_token=t.session,n.curServerInfo=t.inviteServerInfo,n.emit(1)},god.project.myApiUrl)},c.prototype.CS_UserCreate=function(t){var n=this;s.HttpMgr.inst.request("/Api/User/Game/add",{name:t},function(t,e){n.emit(2)})},c.prototype.CS_GetUserInfo=function(){var o=this;s.HttpMgr.inst.request("/Api/User/Game/userInfo",{},function(t,e){if(!t.attributeInfo)return a.getLogger().log("\u672a\u521b\u89d2"),void o.emit(3);a.getLogger().log("\u7528\u6237\u4fe1\u606f:"),a.getLogger().log(t);var n=r.cm.userCtrl;n.goldNum=t.goldNum,n.moneyNum=t.moneyNum,n.setField(t.attributeInfo);for(var i=1;i<=7;i++)r.cm.bagCtrl.CS_GetBagInfo(i);r.cm.signCtrl.CS_GetSignInfo(),r.cm.mailCtrl.CS_GetMailList(),o.emit(4)})},c.NAME="indexCtrl",c);function c(){return null!==i&&i.apply(this,arguments)||this}n.IndexCtrl=o},51:function(t,e,n){n.MailCtrl=void 0;var i,o=t("48"),a=t("31"),l=t("27"),o=(i=o.BaseCtrl,__extends(r,i),r.prototype.onCreate=function(){this.mailList=[]},r.prototype.CS_GetMailList=function(){var n=this;a.HttpMgr.inst.request("/Api/User/Mail/getList",{},function(t,e){n.mailList=t.list,n.emit(0)})},r.prototype.CS_ReceiveMailGoods=function(r){var s=this;a.HttpMgr.inst.request("/Api/User/Mail/receive",{id:r},function(t,e){for(var n=s.mailList,i=0,o=n.length;i<o;i++)if(n[i].id==r){n[i].isReceive=1;break}l.utils.showMsgText(e),s.emit(1)})},r.prototype.CS_DelMail=function(o){var r=this;a.HttpMgr.inst.request("/Api/User/Mail/delete",{},function(t,e){for(var n=r.mailList,i=n.length-1;0<=i;i--)if(o){if(n[i].id==o){n.splice(i,1);break}}else n[i].goodsList.length&&n.splice(i,1);r.emit(1)})},r.NAME="mailCtrl",r);function r(){return null!==i&&i.apply(this,arguments)||this}n.MailCtrl=o},52:function(t,e,n){n.SignCtrl=void 0;var i,o=t("48"),r=t("31"),s=t("27"),o=(i=o.BaseCtrl,__extends(a,i),a.prototype.onCreate=function(){this.signNum=0,this.signRewardList=[],this.lastSignTime=0},a.prototype.CS_GetSignInfo=function(){var n=this;r.HttpMgr.inst.request("/Api/User/Sign/getInfo",{},function(t,e){n.signNum=t.signNum,n.signRewardList=t.signRewardList,n.lastSignTime=t.lastSignTime,n.emit(0)})},a.prototype.CS_UserSign=function(){var n=this;r.HttpMgr.inst.request("/Api/User/Sign/userSign",{},function(t,e){s.utils.showMsgText(e),n.signNum=t.signNum,n.lastSignTime=t.lastSignTime,n.emit(1)})},a.NAME="signCtrl",a);function a(){return null!==i&&i.apply(this,arguments)||this}n.SignCtrl=o},53:function(t,e,n){n.UICtrl=void 0;var i,t=t("48"),t=(i=t.BaseCtrl,__extends(o,i),o.prototype.onCreate=function(){this.onEmitter(god.Emitter.inst,1,this.onOpenLayer)},o.prototype.onOpenLayer=function(t,e){god.show(t,e)},o.NAME="uiCtrl",o);function o(){return null!==i&&i.apply(this,arguments)||this}n.UICtrl=t},54:function(t,e,n){n.UserCtrl=n.UserCtrlKey=void 0;var i=t("48"),t=n.UserCtrlKey||(n.UserCtrlKey={});t.username="username";var o,t=(o=i.BaseCtrl,__extends(r,o),r.NAME="userCtrl",r.KEY=t,r);function r(){return null!==o&&o.apply(this,arguments)||this}n.UserCtrl=t},55:function(t,e,n){n.clazzloader=void 0;var i=t("46"),o=t("49"),r=t("50"),s=t("51"),a=t("2"),l=t("52"),c=t("53"),u=t("54"),g=t("45"),d=t("5"),p=t("13"),m=t("34"),f=t("42");var h=!(n.clazzloader=function(){a.registerCtrlClazz(u.UserCtrl),a.registerCtrlClazz(c.UICtrl),a.registerCtrlClazz(r.IndexCtrl),a.registerCtrlClazz(o.BagCtrl),a.registerCtrlClazz(l.SignCtrl),a.registerCtrlClazz(s.MailCtrl)});god.Emitter.inst.on(god.EmitterEvent.$$reload,function(){h||(egret.Tween.removeAllTweens(),h=!0,god.UIMgr.inst.reset(),god.PkgMgr.inst.reset(),a.resetCm(),g.resetRm(),i.clazzinster(),god.show(d.UIBorder.NAME),god.show(f.UIWait.NAME,function(){god.show(p.UIFixed.NAME),god.show(m.UIIndex.NAME,function(){h=!1})}))})},56:function(t,e,n){n.runGame=void 0;var i=t("43"),o=t("46"),r=t("55"),s=t("5"),a=t("13"),l=t("34"),c=t("42");function u(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return console.log("runGame"),i.UIBinder(),r.clazzloader(),o.clazzinster(),god.show(s.UIBorder.NAME),god.show(c.UIWait.NAME,function(){god.show(a.UIFixed.NAME),god.show(l.UIIndex.NAME,function(){egret.MainContext.instance.stage.removeChild(e)})}),[2]})})}n.runGame=u,window.runGame=u}},[56]);